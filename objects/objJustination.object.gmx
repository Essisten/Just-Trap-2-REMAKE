<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprJustination</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>5</depth>
  <persistent>0</persistent>
  <parentName>objJustinationParent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
colorHP = c_blue;
pitch = 1;
surprise = true;
active_parts = ds_list_create();
parts = ds_list_create();
spikes[0] = instance_create(random(128), 544, objBoss4_Spike);
spikes[1] = instance_create(random_range(652, 800), 544, objBoss4_Spike);
spikes[0].hspeed = choose(-2, 2) * (global.difficulty + 1);
spikes[1].hspeed = choose(-1, 1) * (global.difficulty + 1);
block_count = instance_number(objBoss4_Ground);
for (var i = 0; i &lt; block_count; i++)
{
    blocks[i] = instance_find(objBoss4_Ground, i);
}
part_alpha = 0.5;
fantom = part_type_create();
part_type_alpha2(fantom, 0, 0);
part_type_sprite(fantom, sprJustination, false, false, false);
part_type_life(fantom, 4, 20);
part_type_speed(fantom, 1, 2, 0, 0);
part_type_direction(fantom, 0, 360, 0, 0);
emitter = part_emitter_create(global.portalParticleSystem);
var siz = 4;
part_emitter_region(global.portalParticleSystem, emitter, x - siz, x + siz, y - siz, y + siz, pt_shape_circle, ps_distr_gaussian);
event_user(0);
alarm[3] = 60;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Changing BG
var temp = 31 + random(64);
background_colour = make_colour_rgb(temp, temp, temp);
alarm[4] = 20;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Changing active parts
scrPlaySound(sndBlockChange);
if (!instance_exists(objPlayer) or active)
    return -1;
var length = ds_list_size(active_parts);
for (var i = 0; i &lt; length; i++)
{
    with (ds_list_find_value(active_parts, i))
    {
        active = false;
    }
}
ds_list_clear(active_parts);
for (var i = 0; i &lt; 2; i++)
{
    var r = irandom(ds_list_size(parts) - 1);
    var part = ds_list_find_value(parts, r);
    objBoss4_Effects.side[i] = part;
    ds_list_add(active_parts, part);
    with (part)
    {
        active = true;
        event_user(15);
    }
    ds_list_delete(parts, r);
}
length = min(ds_list_size(active_parts), 2);
for (var i = 0; i &lt; length; i++)
{
   spikes[i].owner = ds_list_find_value(active_parts, i);
   with (spikes[i])
        event_user(0);
}
for (var i = 0; i &lt; block_count; i++)
{
    with (blocks[i])
        event_user(0);
}
event_user(0);
alarm[3] = 600;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Changing pitch

if (pitch &gt;= audio_sound_get_pitch(global.currentMusic))
{
    alarm[2] = -1;
    exit;
}
audio_sound_pitch(global.currentMusic, audio_sound_get_pitch(global.currentMusic) - 1/256);
alarm[2] = 5;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Attacking

repeat (global.difficulty + 1)
{
    with (instance_create(x, y, objCherry))
    {
        sprite_index = choose(sprCherry, sprCherryWhite, sprCherryCyan, sprCherryGray);
        direction = random_range(200, 340);
        speed = random_range(2, 3 + global.difficulty * 2);
        change_dir = random_range(0.1, -0.1) * (global.difficulty + 1);
        image_xscale = 0.5;
        image_yscale = 0.5;
    }
}
alarm[0] = 8 - global.difficulty * 2;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="objBoss4_BigBullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (other.target != objJustination or !active)
{
    return -1;
}
if (godmode)
{
    with (other)
        instance_destroy();
}
event_inherited();
if (HP &lt;= 0)
{
    with (objBoss4_Spike)
    {
        kill = false;
    }
    global.swapControls = false;
    scrSwapControls();
    global.frozen = true;
    alarm[4] = -1;
    background_alpha[0] = 1;
    instance_destroy();
    part_emitter_clear(global.portalParticleSystem, emitter);
    scrStopMusic();
    scrPlaySound(sndMonster1, 1.2);
}
else if (HP &lt; 50 and surprise)
{
    surprise = false;
    scrPlaySound(sndBlockChange);
    for (var i = 0; i &lt; 2; i++)
    {
        with (spikes[i])
        {
            hspeed *= choose(1, -1) * 1.2;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Checking part's HP
var dead = 0;
for (var i = 0; i &lt; 4; i++)
{
     var p = ds_list_find_value(parts, i);
     if (p.HP &lt;= 0)
        dead++;
}
if (dead &gt; 0)
{
    alarm[2] = 5;
    pitch = (256 - dead * 8) / 256;
    part_alpha = dead / 5;
    part_type_alpha2(fantom, part_alpha, 0);
    part_emitter_stream(global.portalParticleSystem, emitter, fantom, -4 +  dead);
}
if (dead &gt;= 4)
{
    alarm[4] = 20;
    active = true;
    global.swapControls = true;
    scrSwapControls();
    alarm[3] = -1;
    for (var i = 0; i &lt; 4; i++)
    {
        with (ds_list_find_value(parts, i))
        {
            vspeed = -irandom(4);
            hspeed = irandom_range(-4, 4);
            gravity = random_range(0.2, 0.4);
            alarm[11] = 5;
            active = false;
        }
    }
    ds_list_clear(active_parts);
    ds_list_clear(parts);
    var r = choose(0, 1);
    for (var i = 0; i &lt; 2; i++)
    {
        var s = spikes[i];
        s.owner = objJustination;
        s.kill = false;
        if (i == r)
        {
            s.doHeal = true;
            s.image_index = 5;
        }
        else
            s.image_index = 3;
    }
    with (objBoss4_Effects)
    {
        part_type_destroy(snow);
        part_type_destroy(smoke);
        part_emitter_destroy(global.portalParticleSystem, emitter[0]);
        part_emitter_destroy(global.saveParticleSystem, emitter[1]);
        surface_free(surf[0]);
        surface_free(surf[1]);
        view_visible[1] = false;
        view_visible[2] = false;
        final = true;
    }
    part_type_sprite(fantom, sprJustinationCrazy, false, false, false);
    part_type_life(fantom, 10, 20);
    part_emitter_stream(global.portalParticleSystem, emitter, fantom, 1);
    sprite_index = sprJustinationCrazy;
    image_alpha = 0.4;
    for (var i = 0; i &lt; block_count; i++)
    {
        with (blocks[i])
            image_index = 0;
    }
    if (instance_exists(objPlayer) and global.difficulty &lt; 3)
    {
        with (objCherry)
        {
            direction = point_direction(x, y, objPlayer.x, objPlayer.y) + 180;
        }
    }
    event_user(15);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Restoring array of available parts
ds_list_clear(parts);
ds_list_add(parts, objJustinationDark);
ds_list_add(parts, objJustinationIce);
ds_list_add(parts, objJustinationLight);
ds_list_add(parts, objJustinationFire);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Copy pasting because of god damn square issue
if (active)
{
    if (HP &gt; 0)
        draw_healthbar(x - 32, oldY - 90, x + 32, oldY - 86, HP, c_black, colorHP, colorHP, 0, true, true);
    else
        draw_sprite_ext(sprite_index, 0, x, y, 1, 1, 0, c_black, 1);
}
else
    draw_sprite_ext(sprite_index, 0, x, y, 1, 1, 0, c_black, 1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
